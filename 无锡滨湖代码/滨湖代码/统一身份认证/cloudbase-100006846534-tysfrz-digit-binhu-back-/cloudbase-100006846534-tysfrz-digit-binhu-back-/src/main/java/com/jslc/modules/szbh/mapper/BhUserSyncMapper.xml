<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jslc.modules.szbh.mapper.BhUserSyncMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="bhUserSyncResultMap" type="com.jslc.modules.szbh.entity.BhUserSync">
        <result column="id" property="id"/>
        <result column="status" property="status"/>
        <result column="create_user" property="createUser"/>
        <result column="create_time" property="createTime"/>
        <result column="name" property="name"/>
        <result column="userid" property="userid"/>
<!--        <result column="password" property="password"/>-->
        <result column="department" property="department"/>
        <result column="is_leader_in_dept" property="isLeaderInDept"/>
        <result column="position" property="position"/>
        <result column="mobile" property="mobile"/>
        <result column="enable" property="enable"/>
        <result column="positions" property="positions"/>
        <result column="gender" property="gender"/>
        <result column="avatar" property="avatar"/>
        <result column="english_name" property="englishName"/>
        <result column="email" property="email"/>
        <result column="telephone" property="telephone"/>
        <result column="sort" property="sort"/>
        <result column="hide_mobile" property="hideMobile"/>
        <result column="extattr" property="extattr"/>
        <result column="qr_code" property="qrCode"/>
        <result column="country_code" property="countryCode"/>
    </resultMap>


    <update id="removeAllUserSync" >
        delete from bh_user_sync
    </update>
    <select id="getUserSync" resultMap="bhUserSyncResultMap">
        select * from bh_user_sync
        where 1=1
        <if test="ids != null">
            and(
            <foreach collection="ids" item="id" index="index" separator="or">
                (major_department= #{id} or POSITION(#{id} IN department))
            </foreach>
            )
        </if>
    </select>

</mapper>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.wxgis.jc.system.web.mapper.SysUserRoleMapper">

    <select id="selectRoleListByUserId" resultType="cn.wxgis.jc.system.po.SysRole">
        select r.*
        from sys_user_role ur
        left join sys_role r on r.id = ur.role_id
        where ur.user_id = #{userId}
    </select>

    <select id="selectRoleListByUserIds" resultType="cn.wxgis.jc.system.resp.SysUserRoleResponese">
        select ur.rold_id, ur.user_id, r.*
        from sys_user_role ur
        left join sys_role r on r.id = ur.role_id
        where ur.user_id in
        <foreach collection="userIds" item="userId" index="index" open="(" close=")" separator=",">
            #{userId}
        </foreach>
    </select>

    <select id="selectRoleNamesByUserId" resultType="java.lang.String">
        select r.`name`
        from sys_user_role ur
        left join sys_role r on r.id = ur.role_id
        where ur.user_id = #{userId}
    </select>

    <select id="getRoleNamesByUserId" resultType="java.lang.String">
        select GROUP_CONCAT(r.name) role_names from sys_role r
        left join sys_user_role ur on ur.role_id = r.id
        where user_id = #{userId}
    </select>

</mapper>
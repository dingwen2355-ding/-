<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.wxgis.jc.civilization.quota.mapper.EventTypeMapper">

    <select id="voList" resultType="cn.wxgis.jc.civilization.quota.resp.QuotaEventTypeResponse">
        select *, pt.`name` parentName
        from quota_event_type t
        left join quota_event_type pt on pt.id = t.parent_id
        <where>
            and t.del_flag = 0
            <if test="parentId != null"> and t.parent_id = #{parentId}</if>
            <if test="name != null and name != ''"> and t.name like concat('%', #{name},'%')</if>
        </where>
        order by t.order_num, t.create_time
    </select>

</mapper>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.znv.manage.dao.ModuleDao">
    <!--通过<resultMap>映射实体类属性名和表的字段名对应关系 -->
    <resultMap type="com.znv.manage.bean.user.Module" id="moduleMap">
        <id property="id" column="id" />
        <result property="moduleName" column="module_name" />
        <result property="moduleUrl" column="module_url" />
        <result property="description" column="description" />
        <result property="upModuleId" column="up_module_id" />
    </resultMap>

    <select id="queryModules" resultType="map" resultMap="moduleMap">
        SELECT * FROM t_cfg_module
        WHERE 1=1
        <if test="id != null">AND id=#{id}</if>
        <if test="moduleName != null">AND module_name = #{moduleName}</if>
        <if test="moduleUrl != null">AND module_url = #{moduleUrl}</if>
        <if test="description != null">AND description = #{description}</if>
        <if test="upModuleId != null">AND up_module_id = #{upModuleId}</if>
    </select>

    <insert id="insertModule" parameterType="map" useGeneratedKeys="false">
      INSERT INTO t_cfg_module (module_name, module_url, description, up_module_id)
        VALUES (
        #{moduleName, jdbcType=VARCHAR},
        #{moduleUrl, jdbcType=VARCHAR},
        #{description, jdbcType=VARCHAR},
        #{upModuleId, jdbcType=BIGINT}
        )
    </insert>

    <update id="updateModule" parameterType="map" useGeneratedKeys="false">
        UPDATE t_cfg_module SET
          module_name = #{moduleName, jdbcType=VARCHAR},
          module_url = #{moduleUrl, jdbcType=VARCHAR},
          description = #{description, jdbcType=VARCHAR},
          up_module_id = #{upModuleId, jdbcType=BIGINT}
        WHERE id = #{id};
    </update>
    <delete id="deleteModule" parameterType="map">
        DELETE FROM t_cfg_module
        WHERE 1=1
        <if test="id != null">and id in (${id}) </if>
        <if test="moduleName != null">and module_name = #{moduleName} </if>
        <if test="moduleUrl != null">and module_url = #{moduleUrl} </if>
        <if test="description != null">and description = #{description} </if>
        <if test="upModuleId != null">and up_module_id = #{upModuleId} </if>
    </delete>
</mapper>